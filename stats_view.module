<?php
// $Id$

/**
 * @file
 * Display usage statistics in various places
 * @author BÃ¨r Kessels <ber@webschuur.com>
 * @link http://wizzlern.nl
 * @package stats_view
 */

/* -----------------------------------------------------------------
  Hook Implementations
------------------------------------------------------------------ */
/**
 * Implementation of hook_menu().
 */
function stats_view_menu() {
  $items = array();

  $items['stats_view_test'] = array(
    'title' => t('View statistics for a test-path'),
    'page callback' => 'stats_view_list',
    'access arguments' => array('access content'),
  );
  
  $items['admin/settings/stats_view'] = array(
    'title' => t('View statistics'),
    'page callback' => 'stats_view_settings',
    'access arguments' => array('access administration pages'),
  );

  return $items;
}

/**
 * callback for hook_menu().
 */
function stats_view_settings($form_state) {
  return "Hier komen de settings";
}

/**
 * Test-page: a menu-callback to render a list of statistics as logged in the accesslog table.
 */
function stats_view_list() {
  $out = ''; 

  // @TODO: fetch the items from the database, using a SQL select query and the appropriate functions.

  // @TODO: iterate over the database-result and fetch each row, one a time.
    // @TODO Make a string from the data in that row, in the form of:
    //       "at $timestamp, host $hostname, visited $path"
    //       concatenate that to the $out variable.

  return $out;
}
